<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberShield Drain</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="popup-container">
        <!-- Header -->
        <header class="popup-header">
            <div class="logo-section">
                <img src="../images/icon32.png" alt="CyberShield Logo" class="logo" id="brandingLogo">
                <div class="brand-info">
                    <h1 class="extension-title" id="brandingTitle">Microsoft 365 Phishing Protection</h1>
                    <span class="version" id="extensionVersion">v1.0.0</span>
                </div>
            </div>
            <div class="status-indicator" id="statusIndicator">
                <span class="status-dot" id="statusDot"></span>
                <span class="status-text" id="statusText">Active</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="popup-main">
            <!-- Quick Actions -->
            <section class="quick-actions">
                <button class="action-btn primary" id="toggleExtension">
                    <span class="btn-icon material-icons">security</span>
                    <span class="btn-text" id="toggleText">Disable Phishing Protection</span>
                </button>
                
                <div class="action-grid">
                    <button class="action-btn secondary small" id="scanCurrentPage">
                        <span class="btn-icon material-icons">search</span>
                        <span class="btn-text">Scan Page</span>
                    </button>
                    
                    <button class="action-btn secondary small" id="viewLogs">
                        <span class="btn-icon material-icons">assignment</span>
                        <span class="btn-text">View Logs</span>
                    </button>
                    
                    <button class="action-btn secondary small" id="openSettings">
                        <span class="btn-icon material-icons">settings</span>
                        <span class="btn-text">Settings</span>
                    </button>
                    
                    <button class="action-btn secondary small" id="reportIssue">
                        <span class="btn-icon material-icons">report_problem</span>
                        <span class="btn-text">Report</span>
                    </button>
                    
                    <button class="action-btn secondary small" id="testRules">
                        <span class="btn-icon material-icons">bug_report</span>
                        <span class="btn-text">Test Rules</span>
                    </button>
                </div>
            </section>

            <!-- Current Page Info -->
            <section class="page-info" id="pageInfoSection">
                <h3 class="section-title">Current Page</h3>
                <div class="page-details">
                    <div class="page-url" id="currentUrl">Loading...</div>
                    <div class="security-status" id="securityStatus">
                        <span class="security-badge" id="securityBadge">Analyzing...</span>
                    </div>
                </div>
                
                <div class="threat-summary" id="threatSummary" style="display: none;">
                    <h4>Threats Detected</h4>
                    <ul id="threatList"></ul>
                </div>
            </section>

            <!-- Statistics -->
            <section class="stats-section">
                <h3 class="section-title">Phishing Protection Statistics</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-number" id="blockedThreats">0</span>
                        <span class="stat-label">Phishing Blocked</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="scannedPages">0</span>
                        <span class="stat-label">Login Pages Verified</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="securityEvents">0</span>
                        <span class="stat-label">Security Alerts</span>
                    </div>
                </div>
            </section>

            <!-- Enterprise Features -->
            <section class="enterprise-section" id="enterpriseSection" style="display: none;">
                <h3 class="section-title">Enterprise</h3>
                <div class="enterprise-info">
                    <div class="policy-status">
                        <span class="policy-label">Managed by:</span>
                        <span class="policy-value" id="managedBy">Organization</span>
                    </div>
                    <div class="compliance-status">
                        <span class="compliance-badge" id="complianceBadge">Compliant</span>
                    </div>
                </div>
            </section>

            <!-- Recent Activity -->
            <section class="activity-section">
                <h3 class="section-title">Recent Activity</h3>
                <div class="activity-list" id="activityList">
                    <div class="activity-item placeholder">
                        <span class="activity-text">No recent activity</span>
                    </div>
                </div>
            </section>

            <!-- Testing Results -->
            <section class="testing-section" id="testingSection" style="display: none;">
                <h3 class="section-title">Detection Rules Testing</h3>
                <div class="testing-controls">
                    <button class="action-btn secondary small" id="runComprehensiveTest">
                        <span class="btn-icon material-icons">play_arrow</span>
                        <span class="btn-text">Run Full Test</span>
                    </button>
                    <button class="action-btn secondary small" id="validateEngine">
                        <span class="btn-icon material-icons">verified</span>
                        <span class="btn-text">Validate Engine</span>
                    </button>
                </div>
                
                <div class="test-results" id="testResults" style="display: none;">
                    <div class="test-summary" id="testSummary"></div>
                    <div class="test-details" id="testDetails"></div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="popup-footer">
            <div class="footer-links">
                <a href="#" id="supportLink" class="footer-link">Support</a>
                <a href="#" id="privacyLink" class="footer-link">Privacy</a>
                <a href="#" id="aboutLink" class="footer-link">About</a>
            </div>
            <div class="company-branding" id="companyBranding">
                <span class="company-name" id="companyName">CyberDrain</span>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner"></div>
        <span class="loading-text">Analyzing page...</span>
    </div>

    <!-- Notification Toast -->
    <div class="notification-toast" id="notificationToast" style="display: none;">
        <span class="notification-text" id="notificationText"></span>
        <button class="notification-close" id="notificationClose">&times;</button>
    </div>

    <script src="popup.js"></script>
</body>
</html>
